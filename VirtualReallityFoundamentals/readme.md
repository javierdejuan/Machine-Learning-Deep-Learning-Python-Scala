## How to build an Equirectangular Grid

The equirectangular grid is used to build panoramic images as theses ones:
<p align="center">
  <img width="400" height="200"  src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/cocina.jpg">
</p>
<p align="center">
Panoramic view of an appartement
</p>

<p align="center">
  <img width="400" height="200" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/mapamundi.jpg">
</p>
<p align="center">
mapamundi
</p>



WIth the correct viewer, this images can then be shown in a [360](https://veer.tv/photos/improved-street-jazz-concert-180510) degrees environnement:

<p align="center">
  <img width="400" height="200" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/grid%20web.png">
</p>
<p align="center">
Equirectangular grid
</p>

A detailed explanation of the foundations of the Equirectangular grid can be fond [here](https://artbellinsky.com/curved-drawing-lessons-2-the-spherical-geometry/). In a glimpse, the equirectangular grid is nothing but the register of the lattitude and longitude angles in a cartesian plane where the vertical axis is the latitude and the horizontal axis is the longitude. The curves inside the equirectangular grid are then Geodesics in a sphere. Those geodesics describe maximum circles within a sphere. 

The purpose of this exercise is to code a script which will calculates these geodesics curves. We need then a mathematical model for the geodesics in a sphere. There are many ways to model this problem, here we have chosen to apply some basic concepts on Differential Geometry because of Riemann's contribution to the formalisation of curved spaces. 


## Geodesics in the 2-sphere

As we have seen earlier, an equirectangular grid can be generated by calculating geodesics on a spherical surface.
The differential equation of geodesics can be then obtained in a very intuitive way as explained in the following [video](https://www.youtube.com/watch?v=IiF31jS_HuI&t=13s). The idea is to force a pararel transport of a particule waliking along the surface of a circle. Then, its tangent vector will have no variation in norm and direction. Developping those constraints we arrive to the following ordinary differential equations:
<p align="center">
  <img width="189" height="55" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/ecuacion%20diferencial%20geodesicas.png">
</p>
The particule, then, closes the maximum circle arriving at destination in the same direction as in the departure, and with the same speed.
[here](www.elmundo.es)
Note: [Christoffel Symbols](https://www.youtube.com/watch?v=dLzoQr6WZT4) and Riemann's Metric Tensor are needed to understand this differential equation

## Implementation of the script

This code computes geodesic's differential equation in a 2-sphere. as shown before. For each iteration of the loop, the initial vector is updgrade with 15 degrees, starting with a 0 degrees angle with the equator maximum circle.
We have used an Odeint object for the integration of the geodesic's differential equation.
Parallel transport is then confirmed since the ending vector directions equals the starting direction.

In this very first image we just cycle between 0 and 180 degrees, we then obtain the geodesic meeting the constraints exposed below:
<p align="center">
  <img width="460" height="300" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/Equirectangular.png">
</p>


Here, we cycle through -180 and 180 to have the simetric representation of the geodesics:
<p align="center">
  <img width="460" height="300" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/equirectangular%20un%20solo%20foco.png">
</p>


And finally, to obtain something more close to the equirectangular grid, we add another "focus" point 90 degrees away from the first one:
<p align="center">
  <img width="460" height="300" src="https://github.com/javierdejuan/stuff/blob/master/differential_geometry/equirectangular%20dos%20focos.png">
</p>
